<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ çŒœæ­Œå°æŒ‘æˆ°</title>
    
    <!-- å…§åµŒ CSS æ¨£å¼ -->
    <style>
        /* é‡ç½®é»˜èªæ¨£å¼ä¸¦è¨­å®šåŸºæœ¬å­—é«” */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* ä¸»éŠæˆ²å®¹å™¨ */
        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
        }

        /* éŠæˆ²æ¨™é¡Œæ¨£å¼ */
        .game-title {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* éŸ³æ¨‚æ’­æ”¾å™¨å®¹å™¨ */
        .audio-container {
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        /* HTML5 éŸ³é »æ’­æ”¾å™¨æ¨£å¼ */
        audio {
            width: 100%;
            height: 40px;
            margin-bottom: 15px;
        }

        /* æ’­æ”¾æ§åˆ¶æŒ‰éˆ• */
        .play-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .control-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        /* è¼¸å…¥æ¡†æ¨£å¼ */
        .input-container {
            margin-bottom: 25px;
        }

        .guess-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.2rem;
            text-align: center;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .guess-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        /* æŒ‰éˆ•å®¹å™¨ */
        .button-container {
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        /* ä¸»è¦æŒ‰éˆ•æ¨£å¼ */
        .btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* ä¸åŒåŠŸèƒ½æŒ‰éˆ•çš„é¡è‰² */
        .btn-submit {
            background: #28a745;
        }

        .btn-submit:hover {
            background: #218838;
        }

        .btn-answer {
            background: #ffc107;
            color: #212529;
        }

        .btn-answer:hover {
            background: #e0a800;
        }

        .btn-next {
            background: #17a2b8;
        }

        .btn-next:hover {
            background: #138496;
        }

        .btn-restart {
            background: #6f42c1;
        }

        .btn-restart:hover {
            background: #5a359a;
        }

        /* åé¥‹è¨Šæ¯å€åŸŸ */
        .feedback {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æˆåŠŸè¨Šæ¯æ¨£å¼ */
        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        /* éŒ¯èª¤è¨Šæ¯æ¨£å¼ */
        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        /* è³‡è¨Šè¨Šæ¯æ¨£å¼ */
        .feedback.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        /* éŠæˆ²å®Œæˆè¨Šæ¯æ¨£å¼ */
        .feedback.complete {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        /* éš±è—å…ƒç´  */
        .hidden {
            display: none !important;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ - æ‰‹æ©Ÿç‰ˆ */
        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
                margin: 10px;
            }

            .game-title {
                font-size: 2rem;
            }

            .button-container {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 200px;
                margin-bottom: 10px;
            }

            .control-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ä¸»éŠæˆ²å®¹å™¨ -->
    <div class="game-container">
        <!-- éŠæˆ²æ¨™é¡Œ -->
        <h1 class="game-title">ğŸµ çŒœæ­Œå°æŒ‘æˆ°</h1>
        
        <!-- éŸ³æ¨‚æ’­æ”¾å™¨å€åŸŸ -->
        <div class="audio-container">
            <!-- HTML5 éŸ³é »æ¨™ç±¤ï¼Œæ”¯æ´å¤šç¨®æ ¼å¼ -->
            <audio id="audioPlayer" controls preload="metadata">
                <!-- æç¤ºç”¨æˆ¶ç€è¦½å™¨ä¸æ”¯æ´éŸ³é »æ’­æ”¾ -->
                æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´éŸ³é »æ’­æ”¾åŠŸèƒ½ã€‚
            </audio>
            
            <!-- æ’­æ”¾æ§åˆ¶æŒ‰éˆ• -->
            <div class="play-controls">
                <button id="playBtn" class="control-btn">â–¶ï¸ æ’­æ”¾</button>
                <button id="pauseBtn" class="control-btn">â¸ï¸ æš«åœ</button>
            </div>
        </div>

        <!-- ä½¿ç”¨è€…è¼¸å…¥å€åŸŸ -->
        <div class="input-container">
            <input type="text" 
                   id="guessInput" 
                   class="guess-input" 
                   placeholder="è«‹è¼¸å…¥æ­Œå..." 
                   maxlength="50">
        </div>

        <!-- éŠæˆ²æ§åˆ¶æŒ‰éˆ• -->
        <div class="button-container">
            <button id="submitBtn" class="btn btn-submit">é€å‡ºç­”æ¡ˆ</button>
            <button id="showAnswerBtn" class="btn btn-answer">çœ‹ç­”æ¡ˆ</button>
            <button id="nextSongBtn" class="btn btn-next hidden">å†ä¾†ä¸€é¦–</button>
            <button id="restartBtn" class="btn btn-restart hidden">é‡æ–°é–‹å§‹</button>
        </div>

        <!-- åé¥‹è¨Šæ¯å€åŸŸ -->
        <div id="feedback" class="feedback">
            ğŸµ æº–å‚™å¥½äº†å—ï¼ŸæŒ‰ä¸‹æ’­æ”¾éµé–‹å§‹çŒœæ­Œï¼
        </div>
    </div>

    <!-- JavaScript éŠæˆ²é‚è¼¯ -->
    <script>
        /**
         * ğŸµ çŒœæ­Œå°æŒ‘æˆ° - éŠæˆ²æ ¸å¿ƒé‚è¼¯
         * 
         * é€™å€‹ JavaScript ç¨‹å¼ç¢¼åŒ…å«äº†å®Œæ•´çš„éŠæˆ²é‚è¼¯ï¼Œ
         * åŒ…æ‹¬æ­Œæ›²ç®¡ç†ã€ä½¿ç”¨è€…äº’å‹•ã€éŠæˆ²ç‹€æ…‹æ§åˆ¶ç­‰åŠŸèƒ½ã€‚
         */

        // ==================== éŠæˆ²è³‡æ–™å®šç¾© ====================
        
        /**
         * æ­Œæ›²è³‡æ–™é™£åˆ—
         * æ³¨æ„ï¼šé€™è£¡ä½¿ç”¨çš„æ˜¯ä½”ä½ç¬¦è·¯å¾‘ï¼Œå¯¦éš›ä½¿ç”¨æ™‚éœ€è¦æ›¿æ›ç‚ºçœŸå¯¦çš„ MP3 æª”æ¡ˆè·¯å¾‘
         * ä¾‹å¦‚ï¼šå°‡ './songs/song1.mp3' æ›¿æ›ç‚ºå¯¦éš›çš„éŸ³æª” URL æˆ–æœ¬åœ°æª”æ¡ˆè·¯å¾‘
         */
const songDatabase = [
    { 
        title: 'Golden', 
        artist: 'Harry Styles', 
        src: './songs/golden.mp3'
    },
    { 
        title: 'å¥½å¥½å…ˆç”Ÿ', 
        artist: 'æœªçŸ¥',  // ä¸ç¢ºå®šæ­Œæ‰‹ï¼Œå¯å†è£œ
        src: './songs/å¥½å¥½å…ˆç”Ÿ.mp3'
    },
    { 
        title: 'ç¼ºå£', 
        artist: 'æœªçŸ¥',  // ä¸ç¢ºå®šæ­Œæ‰‹ï¼Œå¯å†è£œ
        src: './songs/ç¼ºå£.mp3'
    },
    { 
        title: 'ç­‰ä½ ä¸‹èª²', 
        artist: 'å‘¨æ°å€«', 
        src: './songs/ç­‰ä½ ä¸‹èª².mp3'
    },
    { 
        title: 'è¸ç‰›', 
        artist: 'å‘¨æ°å€«', 
        src: './songs/è¸ç‰›.mp3'
    }
];
        // ==================== éŠæˆ²ç‹€æ…‹è®Šæ•¸ ====================
        
        let currentSong = null;           // ç•¶å‰æ’­æ”¾çš„æ­Œæ›²ç‰©ä»¶
        let availableSongs = [];          // å¯ç”¨æ­Œæ›²é™£åˆ—ï¼ˆé¿å…é‡è¤‡ï¼‰
        let gameCompleted = false;        // éŠæˆ²æ˜¯å¦å®Œæˆæ¨™èªŒ
        let currentRound = 0;             // ç•¶å‰å›åˆæ•¸
        let hasGuessed = false;           // æ˜¯å¦å·²ç¶“çŒœéæ­¤é¦–æ­Œ

        // ==================== DOM å…ƒç´ ç²å– ====================
        
        /**
         * ç²å– HTML é é¢ä¸­çš„å„å€‹äº’å‹•å…ƒç´ 
         * é€™äº›å…ƒç´ å°‡åœ¨éŠæˆ²éç¨‹ä¸­è¢«ç¨‹å¼å‹•æ…‹æ§åˆ¶
         */
        const audioPlayer = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const guessInput = document.getElementById('guessInput');
        const submitBtn = document.getElementById('submitBtn');
        const showAnswerBtn = document.getElementById('showAnswerBtn');
        const nextSongBtn = document.getElementById('nextSongBtn');
        const restartBtn = document.getElementById('restartBtn');
        const feedback = document.getElementById('feedback');

        // ==================== éŠæˆ²åˆå§‹åŒ– ====================
        
        /**
         * åˆå§‹åŒ–éŠæˆ²
         * é‡ç½®æ‰€æœ‰éŠæˆ²ç‹€æ…‹ï¼Œæº–å‚™é–‹å§‹æ–°éŠæˆ²
         */
        function initializeGame() {
            console.log('ğŸ® åˆå§‹åŒ–éŠæˆ²...');
            
            // é‡ç½®éŠæˆ²ç‹€æ…‹è®Šæ•¸
            availableSongs = [...songDatabase]; // è¤‡è£½æ­Œæ›²è³‡æ–™åº«ï¼Œé¿å…ä¿®æ”¹åŸå§‹è³‡æ–™
            gameCompleted = false;
            currentRound = 0;
            hasGuessed = false;
            currentSong = null;
            
            // é‡ç½® UI å…ƒç´ 
            guessInput.value = '';
            feedback.textContent = 'ğŸµ æº–å‚™å¥½äº†å—ï¼Ÿé¸ä¸€é¦–æ­Œé–‹å§‹çŒœæ­Œï¼';
            feedback.className = 'feedback';
            
            // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
            submitBtn.classList.remove('hidden');
            showAnswerBtn.classList.remove('hidden');
            nextSongBtn.classList.add('hidden');
            restartBtn.classList.add('hidden');
            
            // æš«åœä¸¦é‡ç½®éŸ³é »æ’­æ”¾å™¨
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            
            // é–‹å§‹ç¬¬ä¸€é¦–æ­Œ
            loadNextSong();
        }

        // ==================== æ­Œæ›²ç®¡ç†åŠŸèƒ½ ====================
        
        /**
         * è¼‰å…¥ä¸‹ä¸€é¦–æ­Œæ›²
         * å¾å¯ç”¨æ­Œæ›²ä¸­éš¨æ©Ÿé¸æ“‡ä¸€é¦–ï¼Œä¸¦è¨­å®šåˆ°éŸ³é »æ’­æ”¾å™¨
         */
        function loadNextSong() {
            console.log('ğŸµ è¼‰å…¥ä¸‹ä¸€é¦–æ­Œ...');
            
            // æª¢æŸ¥æ˜¯å¦é‚„æœ‰å¯ç”¨æ­Œæ›²
            if (availableSongs.length === 0) {
                endGame();
                return;
            }
            
            // éš¨æ©Ÿé¸æ“‡ä¸€é¦–æ­Œæ›²
            const randomIndex = Math.floor(Math.random() * availableSongs.length);
            currentSong = availableSongs[randomIndex];
            
            // å¾å¯ç”¨æ­Œæ›²ä¸­ç§»é™¤å·²é¸æ“‡çš„æ­Œæ›²ï¼ˆé¿å…é‡è¤‡ï¼‰
            availableSongs.splice(randomIndex, 1);
            
            // è¨­å®šéŸ³é »æ’­æ”¾å™¨çš„ä¾†æº
            audioPlayer.src = currentSong.src;
            
            // é‡ç½®å›åˆç‹€æ…‹
            hasGuessed = false;
            currentRound++;
            
            // æ›´æ–° UI
            guessInput.value = '';
            feedback.textContent = `ğŸµ ç¬¬ ${currentRound} é¦–æ­Œè¼‰å…¥å®Œæˆï¼æŒ‰æ’­æ”¾éµé–‹å§‹çŒœæ­Œï½`;
            feedback.className = 'feedback info';
            
            // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
            submitBtn.classList.remove('hidden');
            showAnswerBtn.classList.remove('hidden');
            nextSongBtn.classList.add('hidden');
            
            console.log(`ğŸ“€ è¼‰å…¥æ­Œæ›²ï¼š${currentSong.title} - ${currentSong.artist}`);
            
            // å˜—è©¦è‡ªå‹•æ’­æ”¾ï¼ˆæŸäº›ç€è¦½å™¨å¯èƒ½æœƒé˜»æ“‹è‡ªå‹•æ’­æ”¾ï¼‰
            setTimeout(() => {
                playAudio();
            }, 500);
        }

        // ==================== éŸ³é »æ§åˆ¶åŠŸèƒ½ ====================
        
        /**
         * æ’­æ”¾éŸ³é »
         * è™•ç†è‡ªå‹•æ’­æ”¾çš„ç€è¦½å™¨é™åˆ¶
         */
        function playAudio() {
            const playPromise = audioPlayer.play();
            
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        console.log('ğŸµ éŸ³é »é–‹å§‹æ’­æ”¾');
                    })
                    .catch(error => {
                        console.log('âš ï¸ è‡ªå‹•æ’­æ”¾è¢«ç€è¦½å™¨é˜»æ“‹ï¼Œè«‹æ‰‹å‹•é»æ“Šæ’­æ”¾æŒ‰éˆ•');
                        feedback.textContent = 'âš ï¸ è«‹æ‰‹å‹•é»æ“Šæ’­æ”¾æŒ‰éˆ•é–‹å§‹æ’­æ”¾éŸ³æ¨‚';
                        feedback.className = 'feedback info';
                    });
            }
        }

        /**
         * æš«åœéŸ³é »æ’­æ”¾
         */
        function pauseAudio() {
            audioPlayer.pause();
            console.log('â¸ï¸ éŸ³é »å·²æš«åœ');
        }

        // ==================== ç­”æ¡ˆæ¯”å°é‚è¼¯ ====================
        
        /**
         * æª¢æŸ¥ä½¿ç”¨è€…ç­”æ¡ˆæ˜¯å¦æ­£ç¢º
         * é€²è¡Œæ¨¡ç³Šæ¯”å°ï¼Œå»é™¤ç©ºç™½å’Œæ¨™é»ç¬¦è™Ÿ
         * @param {string} userAnswer - ä½¿ç”¨è€…è¼¸å…¥çš„ç­”æ¡ˆ
         * @param {string} correctTitle - æ­£ç¢ºçš„æ­Œæ›²æ¨™é¡Œ
         * @returns {boolean} - æ˜¯å¦ç­”å°
         */
        function checkAnswer(userAnswer, correctTitle) {
            // æ¨™æº–åŒ–ç­”æ¡ˆï¼šè½‰å°å¯«ã€å»é™¤ç©ºç™½å’Œæ¨™é»ç¬¦è™Ÿ
            const normalizeText = (text) => {
                return text
                    .toLowerCase()
                    .replace(/\s+/g, '')           // å»é™¤æ‰€æœ‰ç©ºç™½
                    .replace(/[^\w\u4e00-\u9fa5]/g, ''); // å»é™¤æ¨™é»ç¬¦è™Ÿï¼Œä¿ç•™ä¸­è‹±æ–‡å’Œæ•¸å­—
            };
            
            const normalizedUserAnswer = normalizeText(userAnswer);
            const normalizedCorrectTitle = normalizeText(correctTitle);
            
            console.log(`ğŸ” æ¯”å°ç­”æ¡ˆï¼šç”¨æˆ¶è¼¸å…¥"${normalizedUserAnswer}" vs æ­£ç¢ºç­”æ¡ˆ"${normalizedCorrectTitle}"`);
            
            // å®Œå…¨åŒ¹é…
            if (normalizedUserAnswer === normalizedCorrectTitle) {
                return true;
            }
            
            // åŒ…å«åŒ¹é…ï¼ˆç”¨æˆ¶ç­”æ¡ˆåŒ…å«æ­£ç¢ºæ¨™é¡Œçš„ä¸»è¦éƒ¨åˆ†ï¼‰
            if (normalizedCorrectTitle.includes(normalizedUserAnswer) && normalizedUserAnswer.length >= 2) {
                return true;
            }
            
            return false;
        }

        // ==================== éŠæˆ²æ ¸å¿ƒé‚è¼¯ ====================
        
        /**
         * è™•ç†ä½¿ç”¨è€…æäº¤ç­”æ¡ˆ
         */
        function submitAnswer() {
            const userAnswer = guessInput.value.trim();
            
            // æª¢æŸ¥è¼¸å…¥æ˜¯å¦ç‚ºç©º
            if (!userAnswer) {
                feedback.textContent = 'âŒ è«‹è¼¸å…¥æ­Œåå†é€å‡ºç­”æ¡ˆï¼';
                feedback.className = 'feedback error';
                return;
            }
            
            // æª¢æŸ¥æ˜¯å¦æœ‰ç•¶å‰æ­Œæ›²
            if (!currentSong) {
                feedback.textContent = 'âŒ è«‹å…ˆè¼‰å…¥æ­Œæ›²ï¼';
                feedback.className = 'feedback error';
                return;
            }
            
            console.log(`ğŸ“ ä½¿ç”¨è€…æäº¤ç­”æ¡ˆï¼š${userAnswer}`);
            
            // æ¯”å°ç­”æ¡ˆ
            const isCorrect = checkAnswer(userAnswer, currentSong.title);
            
            if (isCorrect) {
                // ç­”å°äº†ï¼
                feedback.textContent = `âœ… çŒœå°äº†ï¼é€™é¦–æ­Œæ˜¯ã€Œ${currentSong.title}ã€- ${currentSong.artist}`;
                feedback.className = 'feedback success';
                hasGuessed = true;
                showNextOptions();
            } else {
                // ç­”éŒ¯äº†
                feedback.textContent = 'âŒ çŒœéŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡ï¼æˆ–é»æ“Šã€Œçœ‹ç­”æ¡ˆã€æŸ¥çœ‹æ­£ç¢ºç­”æ¡ˆ';
                feedback.className = 'feedback error';
            }
            
            // æ¸…ç©ºè¼¸å…¥æ¡†
            guessInput.value = '';
        }

        /**
         * é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
         */
        function showAnswer() {
            if (!currentSong) {
                feedback.textContent = 'âŒ è«‹å…ˆè¼‰å…¥æ­Œæ›²ï¼';
                feedback.className = 'feedback error';
                return;
            }
            
            feedback.textContent = `ğŸ’¡ æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼šã€Œ${currentSong.title}ã€- ${currentSong.artist}`;
            feedback.className = 'feedback info';
            hasGuessed = true;
            showNextOptions();
        }

        /**
         * é¡¯ç¤ºä¸‹ä¸€æ­¥é¸é …ï¼ˆå†ä¾†ä¸€é¦–æˆ–é‡æ–°é–‹å§‹ï¼‰
         */
        function showNextOptions() {
            // éš±è—çŒœé¡ŒæŒ‰éˆ•
            submitBtn.classList.add('hidden');
            showAnswerBtn.classList.add('hidden');
            
            // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æ›´å¤šæ­Œæ›²
            if (availableSongs.length > 0) {
                nextSongBtn.classList.remove('hidden');
            } else {
                // æ‰€æœ‰æ­Œæ›²éƒ½çŒœå®Œäº†
                setTimeout(endGame, 1500);
            }
            
            // é¡¯ç¤ºé‡æ–°é–‹å§‹æŒ‰éˆ•
            restartBtn.classList.remove('hidden');
        }

        /**
         * çµæŸéŠæˆ²
         */
        function endGame() {
            gameCompleted = true;
            feedback.textContent = 'ğŸ‰ æ­å–œï¼æ‰€æœ‰æ­Œæ›²éƒ½å®Œæˆäº†ï¼ä½ çœŸæ˜¯å€‹éŸ³æ¨‚é”äººï¼';
            feedback.className = 'feedback complete';
            
            // éš±è—æ‰€æœ‰å…¶ä»–æŒ‰éˆ•ï¼Œåªé¡¯ç¤ºé‡æ–°é–‹å§‹
            submitBtn.classList.add('hidden');
            showAnswerBtn.classList.add('hidden');
            nextSongBtn.classList.add('hidden');
            restartBtn.classList.remove('hidden');
            
            // åœæ­¢éŸ³é »æ’­æ”¾
            audioPlayer.pause();
            
            console.log('ğŸŠ éŠæˆ²çµæŸï¼');
        }

        // ==================== äº‹ä»¶ç›£è½å™¨ ====================
        
        /**
         * è¨­å®šæ‰€æœ‰æŒ‰éˆ•å’Œè¼¸å…¥æ¡†çš„äº‹ä»¶ç›£è½å™¨
         */
        
        // æ’­æ”¾æŒ‰éˆ•
        playBtn.addEventListener('click', () => {
            console.log('ğŸµ ç”¨æˆ¶é»æ“Šæ’­æ”¾æŒ‰éˆ•');
            playAudio();
        });
        
        // æš«åœæŒ‰éˆ•
        pauseBtn.addEventListener('click', () => {
            console.log('â¸ï¸ ç”¨æˆ¶é»æ“Šæš«åœæŒ‰éˆ•');
            pauseAudio();
        });
        
        // é€å‡ºç­”æ¡ˆæŒ‰éˆ•
        submitBtn.addEventListener('click', submitAnswer);
        
        // çœ‹ç­”æ¡ˆæŒ‰éˆ•
        showAnswerBtn.addEventListener('click', showAnswer);
        
        // å†ä¾†ä¸€é¦–æŒ‰éˆ•
        nextSongBtn.addEventListener('click', () => {
            console.log('â­ï¸ ç”¨æˆ¶è¦æ±‚ä¸‹ä¸€é¦–æ­Œ');
            loadNextSong();
        });
        
        // é‡æ–°é–‹å§‹æŒ‰éˆ•
        restartBtn.addEventListener('click', () => {
            console.log('ğŸ”„ ç”¨æˆ¶è¦æ±‚é‡æ–°é–‹å§‹éŠæˆ²');
            initializeGame();
        });
        
        // è¼¸å…¥æ¡†å›è»Šéµæäº¤
        guessInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                submitAnswer();
            }
        });
        
        // è¼¸å…¥æ¡†ç„¦é»äº‹ä»¶ï¼ˆæ¸…é™¤éŒ¯èª¤è¨Šæ¯ï¼‰
        guessInput.addEventListener('focus', () => {
            if (feedback.classList.contains('error')) {
                feedback.textContent = 'ğŸµ å°ˆå¿ƒè½æ­Œï¼Œè¼¸å…¥ä½ çŒœåˆ°çš„æ­Œåå§ï¼';
                feedback.className = 'feedback';
            }
        });

        // ==================== éŸ³é »äº‹ä»¶ç›£è½ ====================
        
        /**
         * ç›£è½éŸ³é »æ’­æ”¾å™¨çš„å„ç¨®äº‹ä»¶
         */
        
        // éŸ³é »è¼‰å…¥å®Œæˆ
        audioPlayer.addEventListener('loadeddata', () => {
            console.log('ğŸ“¡ éŸ³é »æª”æ¡ˆè¼‰å…¥å®Œæˆ');
        });
        
        // éŸ³é »è¼‰å…¥éŒ¯èª¤
        audioPlayer.addEventListener('error', (e) => {
            console.error('âŒ éŸ³é »è¼‰å…¥å¤±æ•—ï¼š', e);
            feedback.textContent = 'âŒ éŸ³æ¨‚æª”æ¡ˆè¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æª”æ¡ˆè·¯å¾‘æ˜¯å¦æ­£ç¢º';
            feedback.className = 'feedback error';
        });
        
        // éŸ³é »æ’­æ”¾çµæŸ
        audioPlayer.addEventListener('ended', () => {
            console.log('ğŸµ éŸ³é »æ’­æ”¾çµæŸ');
            if (!hasGuessed && !gameCompleted) {
                feedback.textContent = 'ğŸµ æ­Œæ›²æ’­æ”¾çµæŸï¼Œä½ çŒœåˆ°æ˜¯ä»€éº¼æ­Œäº†å—ï¼Ÿ';
                feedback.className = 'feedback info';
            }
        });

        // ==================== é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ– ====================
        
        /**
         * ç•¶é é¢å®Œå…¨è¼‰å…¥å¾Œï¼Œè‡ªå‹•åˆå§‹åŒ–éŠæˆ²
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ“± é é¢è¼‰å…¥å®Œæˆï¼Œé–‹å§‹åˆå§‹åŒ–éŠæˆ²...');
            initializeGame();
        });

        // ==================== é¡å¤–åŠŸèƒ½å’Œå„ªåŒ– ====================
        
        /**
         * é˜²æ­¢ç”¨æˆ¶æ„å¤–é›¢é–‹é é¢æ™‚ä¸Ÿå¤±éŠæˆ²é€²åº¦ï¼ˆå¯é¸åŠŸèƒ½ï¼‰
         */
        window.addEventListener('beforeunload', (event) => {
            if (!gameCompleted && currentRound > 1) {
                event.preventDefault();
                event.returnValue = 'ç¢ºå®šè¦é›¢é–‹å—ï¼Ÿä½ çš„éŠæˆ²é€²åº¦å°‡æœƒä¸Ÿå¤±ã€‚';
            }
        });
        
        /**
         * éµç›¤å¿«æ·éµæ”¯æ´ï¼ˆå¯é¸åŠŸèƒ½ï¼‰
         */
        document.addEventListener('keydown', (event) => {
            // ç©ºç™½éµ = æ’­æ”¾/æš«åœ
            if (event.code === 'Space' && event.target !== guessInput) {
                event.preventDefault();
                if (audioPlayer.paused) {
                    playAudio();
                } else {
                    pauseAudio();
                }
            }
            
            // Escape éµ = æ¸…ç©ºè¼¸å…¥æ¡†
            if (event.key === 'Escape') {
                guessInput.value = '';
                guessInput.blur();
            }
        });

        // ==================== èª¿è©¦å’Œé–‹ç™¼å·¥å…· ====================
        
        /**
         * é–‹ç™¼è€…æ¨¡å¼ï¼šåœ¨æ§åˆ¶å°é¡¯ç¤ºç•¶å‰æ­Œæ›²ï¼ˆåƒ…ä¾›èª¿è©¦ä½¿ç”¨ï¼‰
         * åœ¨ç€è¦½å™¨æ§åˆ¶å°è¼¸å…¥ showCurrentSong() å¯ä»¥æŸ¥çœ‹ç•¶å‰æ­Œæ›²
         */
        window.showCurrentSong = function() {
            if (currentSong) {
                console.log(`ğŸµ ç•¶å‰æ­Œæ›²ï¼š${currentSong.title} - ${currentSong.artist}`);
                console.log(`ğŸ“ æª”æ¡ˆè·¯å¾‘ï¼š${currentSong.src}`);
            } else {
                console.log('âŒ ç›®å‰æ²’æœ‰è¼‰å…¥ä»»ä½•æ­Œæ›²');
            }
        };
        
        /**
         * é–‹ç™¼è€…æ¨¡å¼ï¼šé¡¯ç¤ºéŠæˆ²ç‹€æ…‹
         */
        window.showGameStatus = function() {
            console.log('ğŸ® éŠæˆ²ç‹€æ…‹è³‡è¨Šï¼š');
            console.log(`ğŸ“Š ç•¶å‰å›åˆï¼š${currentRound}`);
            console.log(`ğŸµ å‰©é¤˜æ­Œæ›²ï¼š${availableSongs.length}`);
            console.log(`âœ… éŠæˆ²å®Œæˆï¼š${gameCompleted}`);
            console.log(`ğŸ¤” å·²çŒœéï¼š${hasGuessed}`);
        };

        // ==================== ç¨‹å¼ç¢¼çµæŸ ====================
        
        console.log('ğŸµ çŒœæ­Œå°æŒ‘æˆ°éŠæˆ²è¼‰å…¥å®Œæˆï¼');
        console.log('ğŸ’¡ é–‹ç™¼è€…æç¤ºï¼šåœ¨æ§åˆ¶å°è¼¸å…¥ showCurrentSong() å¯ä»¥æŸ¥çœ‹ç•¶å‰æ­Œæ›²');
        console.log('ğŸ’¡ é–‹ç™¼è€…æç¤ºï¼šåœ¨æ§åˆ¶å°è¼¸å…¥ showGameStatus() å¯ä»¥æŸ¥çœ‹éŠæˆ²ç‹€æ…‹');
        
    </script>
</body>
</html>