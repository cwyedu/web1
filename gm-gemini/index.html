<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ çŒœæ­Œå°æŒ‘æˆ°</title>
    <style>
        /* CSS Reset å’ŒåŸºæœ¬å­—é«”è¨­å®š */
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f4f7f6; /* æ·¡è‰²ç³»èƒŒæ™¯ */
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* è®“å…§å®¹å¾é ‚éƒ¨é–‹å§‹ï¼Œæ‰‹æ©Ÿä¸Šæ›´åˆç† */
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        /* éŠæˆ²ä¸»å®¹å™¨ */
        #game-container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ï¼Œé©åˆé›»è…¦å’Œæ‰‹æ©Ÿ */
        }

        /* æ¨™é¡Œæ¨£å¼ */
        h1 {
            text-align: center;
            color: #007bff;
            margin-bottom: 30px;
            font-size: 2.2em; /* å­—é«”å¤§è€Œæ¸…æ¥š */
        }

        /* éŸ³æ¨‚æ’­æ”¾å™¨å€åŸŸ */
        #audio-area {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #e9ecef;
        }

        audio {
            width: 100%;
            max-width: 350px;
            margin-top: 10px;
        }

        /* è¼¸å…¥å€åŸŸæ¨£å¼ */
        #input-area {
            display: flex;
            flex-direction: column;
            gap: 10px; /* å…ƒç´ é–“è· */
            margin-bottom: 20px;
        }

        #guess-input {
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box; /* ç¢ºä¿ padding ä¸å¢åŠ å¯¬åº¦ */
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            flex: 1; /* è®“æŒ‰éˆ•å¹³å‡åˆ†é…ç©ºé–“ */
            min-width: 100px; /* æœ€å°å¯¬åº¦ï¼Œé˜²æ­¢æ‰‹æ©Ÿä¸Šå¤ªçª„ */
        }

        /* ç‰¹å®šæŒ‰éˆ•é¡è‰² */
        #submit-btn {
            background-color: #28a745; /* ç¶ è‰² - é€å‡º */
            color: white;
        }
        #submit-btn:hover {
            background-color: #218838;
        }

        #show-answer-btn {
            background-color: #ffc107; /* é»ƒè‰² - çœ‹ç­”æ¡ˆ */
            color: #333;
        }
        #show-answer-btn:hover {
            background-color: #e0a800;
        }

        #next-song-btn, #restart-btn {
            background-color: #007bff; /* è—è‰² - å†ä¾†ä¸€é¦–/é‡æ–°é–‹å§‹ */
            color: white;
            display: none; /* é è¨­éš±è— */
        }
        #next-song-btn:hover, #restart-btn:hover {
            background-color: #0056b3;
        }

        /* éŠæˆ²ç‹€æ…‹é¡¯ç¤ºå€åŸŸ */
        #feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-height: 50px; /* ç¢ºä¿æœ‰è¶³å¤ ç©ºé–“é¡¯ç¤ºè¨Šæ¯ */
            font-size: 1.2em;
            font-weight: bold;
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 600px) {
            #game-container {
                padding: 20px;
            }
            h1 {
                font-size: 1.8em;
            }
            .button-group {
                flex-direction: column; /* æ‰‹æ©Ÿä¸ŠæŒ‰éˆ•å‚ç›´å †ç–Š */
            }
            button {
                padding: 12px;
            }
        }
    </style>
</head>
<body>

    <div id="game-container">
        <h1>ğŸµ çŒœæ­Œå°æŒ‘æˆ°</h1>

        <div id="audio-area">
            <p>è½éŸ³æ¨‚ï¼ŒçŒœæ­Œåï¼</p>
            <audio id="audio-player" controls preload="auto"></audio>
        </div>

        <div id="game-controls">
            <div id="input-area">
                <input type="text" id="guess-input" placeholder="è¼¸å…¥æ­Œåæˆ–éƒ¨åˆ†æ­Œå" autofocus>
            </div>

            <div class="button-group">
                <button id="submit-btn">é€å‡ºç­”æ¡ˆ</button>
                <button id="show-answer-btn">çœ‹ç­”æ¡ˆ</button>
            </div>
            
            <div class="button-group" style="margin-top: 10px;">
                <button id="next-song-btn">å†ä¾†ä¸€é¦–</button>
                <button id="restart-btn" style="display: none;">é‡æ–°é–‹å§‹éŠæˆ²</button>
            </div>

            <div id="feedback-area">
                </div>
        </div>

    </div>

    <script>
        // --- è³‡æ–™å®šç¾© ---

        /**
         * @typedef {Object} Song
         * @property {string} title - æ­Œæ›²æ¨™é¡Œ (ç”¨æ–¼æ¯”å°ç­”æ¡ˆ)
         * @property {string} artist - æ­Œæ‰‹åç¨± (ç”¨æ–¼æç¤ºæˆ–é¡¯ç¤ºç­”æ¡ˆ)
         * @property {string} audioSrc - éŸ³æª”è·¯å¾‘
         * * ğŸ”” å‚™è¨»ï¼šè«‹å°‡ä»¥ä¸‹ audioSrc æ›¿æ›æˆå¯¦éš›å¯æ’­æ”¾çš„ MP3 æª”æ¡ˆè·¯å¾‘ã€‚
         * ä¾‹å¦‚ï¼šå°‡ './songs/song1.mp3' æ›¿æ›ç‚º 'https://yourdomain.com/path/to/song1.mp3'
         * è‹¥æœ¬åœ°æ¸¬è©¦ï¼Œè«‹åœ¨ index.html åŒç›®éŒ„ä¸‹å»ºç«‹ songs è³‡æ–™å¤¾ï¼Œä¸¦æ”¾å…¥éŸ³æª”ã€‚
         */
const ALL_SONGS = [
    { title: 'Golden', artist: 'æœªçŸ¥', audioSrc: './songs/golden.mp3' },
    { title: 'å¥½å¥½å…ˆç”Ÿ', artist: 'æœªçŸ¥', audioSrc: './songs/å¥½å¥½å…ˆç”Ÿ.mp3' },
    { title: 'ç¼ºå£', artist: 'æœªçŸ¥', audioSrc: './songs/ç¼ºå£.mp3' },
    { title: 'ç­‰ä½ ä¸‹èª²', artist: 'æœªçŸ¥', audioSrc: './songs/ç­‰ä½ ä¸‹èª².mp3' },
    { title: 'è¸ç‰›', artist: 'æœªçŸ¥', audioSrc: './songs/è¸ç‰›.mp3' },
]; 

        // --- ç‹€æ…‹è®Šæ•¸ ---
        let availableSongs = []; // å„²å­˜å°šæœªçŒœéçš„æ­Œæ›²åˆ—è¡¨
        let currentSong = null; // ç•¶å‰æ­£åœ¨æ’­æ”¾çš„æ­Œæ›²ç‰©ä»¶
        let isAnswered = false; // æ¨™è¨˜ç•¶å‰æ­Œæ›²æ˜¯å¦å·²ç­”å°æˆ–å·²çœ‹ç­”æ¡ˆ

        // --- DOM å…ƒç´ å¿«å– ---
        const audioPlayer = document.getElementById('audio-player');
        const guessInput = document.getElementById('guess-input');
        const submitBtn = document.getElementById('submit-btn');
        const showAnswerBtn = document.getElementById('show-answer-btn');
        const nextSongBtn = document.getElementById('next-song-btn');
        const restartBtn = document.getElementById('restart-btn');
        const feedbackArea = document.getElementById('feedback-area');

        // --- æ ¸å¿ƒéŠæˆ²é‚è¼¯å‡½æ•¸ ---

        /**
         * åˆå§‹åŒ–æˆ–é‡æ–°é–‹å§‹éŠæˆ²ã€‚
         * é‡ç½®æ‰€æœ‰ç‹€æ…‹ï¼Œä¸¦é–‹å§‹ç¬¬ä¸€é¦–æ­Œã€‚
         */
        function initializeGame() {
            // è¤‡è£½å®Œæ•´çš„æ­Œæ›²åˆ—è¡¨åˆ° availableSongsï¼Œç¢ºä¿æ­Œæ›²ä¸é‡è¤‡
            availableSongs = [...ALL_SONGS]; 
            currentSong = null;
            isAnswered = false;
            
            // é‡ç½® UI
            restartBtn.style.display = 'none';
            feedbackArea.textContent = 'éŠæˆ²é–‹å§‹ï¼é»æ“Šæ’­æ”¾ä¸¦é–‹å§‹çŒœæ­Œå§ï¼';
            
            loadNextSong(); // è¼‰å…¥ä¸¦é–‹å§‹ç¬¬ä¸€é¦–æ­Œ
        }

        /**
         * å¾ availableSongs ä¸­éš¨æ©Ÿé¸æ“‡ä¸€é¦–æ­Œæ›²ä¸¦è¼‰å…¥æ’­æ”¾å™¨ã€‚
         */
        function loadNextSong() {
            // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æœªçŒœçš„æ­Œæ›²
            if (availableSongs.length === 0) {
                gameOver();
                return;
            }

            // 1. éš¨æ©Ÿé¸å–ä¸€é¦–æ­Œ
            const randomIndex = Math.floor(Math.random() * availableSongs.length);
            currentSong = availableSongs[randomIndex];
            
            // 2. å°‡é¸ä¸­çš„æ­Œæ›²å¾åˆ—è¡¨ä¸­ç§»é™¤ï¼Œç¢ºä¿ä¸é‡è¤‡
            availableSongs.splice(randomIndex, 1); 

            // 3. é‡ç½®éŠæˆ²ç‹€æ…‹
            isAnswered = false;
            guessInput.value = '';
            guessInput.disabled = false;
            feedbackArea.textContent = `å‰©é¤˜ ${availableSongs.length} é¦–æ­Œã€‚`;
            
            // 4. æ›´æ–°æŒ‰éˆ•é¡¯ç¤º
            submitBtn.style.display = 'inline-block';
            showAnswerBtn.style.display = 'inline-block';
            nextSongBtn.style.display = 'none';

            // 5. è¨­å®šéŸ³æª”ä¾†æºä¸¦è‡ªå‹•æ’­æ”¾
            audioPlayer.src = currentSong.audioSrc;
            audioPlayer.load(); // è¼‰å…¥æ–°çš„éŸ³æª”
            
            // å˜—è©¦è‡ªå‹•æ’­æ”¾ã€‚ç”±æ–¼ç€è¦½å™¨é™åˆ¶ï¼Œä¸ä¸€å®šèƒ½æˆåŠŸï¼Œæœƒä¾è³´ä½¿ç”¨è€…çš„æ‰‹å‹•æ’­æ”¾ã€‚
            audioPlayer.play().catch(error => {
                console.log("è‡ªå‹•æ’­æ”¾å¤±æ•—ï¼Œè«‹ä½¿ç”¨è€…æ‰‹å‹•æ’­æ”¾ã€‚", error);
            });
        }

        /**
         * è™•ç†ä½¿ç”¨è€…æäº¤ç­”æ¡ˆçš„é‚è¼¯ã€‚
         */
        function submitGuess() {
            if (isAnswered) return; // å¦‚æœå·²ç¶“ç­”éï¼Œå‰‡å¿½ç•¥
            
            const userGuess = guessInput.value.trim().toLowerCase();
            const correctTitle = currentSong.title.trim().toLowerCase();

            // ç°¡åŒ–æ¯”å°é‚è¼¯ï¼šåªè¦ç­”æ¡ˆåŒ…å«æ­£ç¢ºæ­Œåï¼Œæˆ–è€…æ­ŒååŒ…å«ç­”æ¡ˆï¼Œå°±ç®—å°ã€‚
            // æˆ–æ˜¯å®Œå…¨ç›¸ç­‰ã€‚
            const isCorrect = (
                userGuess === correctTitle || 
                correctTitle.includes(userGuess) && userGuess.length > 0
            );

            if (isCorrect) {
                // âœ… çŒœå°äº†
                feedbackArea.innerHTML = `âœ… **çŒœå°äº†ï¼** æ­Œåæ˜¯ï¼šã€Š${currentSong.title}ã€‹ï¼Œç”± ${currentSong.artist} æ¼”å”±ã€‚`;
                handleCorrectAnswer();
            } else {
                // âŒ çŒœéŒ¯äº†
                feedbackArea.textContent = 'âŒ çŒœéŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡ï¼';
                guessInput.focus(); // è®“ä½¿ç”¨è€…å¯ä»¥å¿«é€Ÿé‡æ–°è¼¸å…¥
            }
        }

        /**
         * è™•ç†çœ‹ç­”æ¡ˆçš„é‚è¼¯ã€‚
         */
        function showAnswer() {
            if (isAnswered) return; // å¦‚æœå·²ç¶“ç­”éï¼Œå‰‡å¿½ç•¥
            
            feedbackArea.innerHTML = `ğŸ˜® ç­”æ¡ˆæ˜¯ï¼šã€Š${currentSong.title}ã€‹ï¼Œç”± ${currentSong.artist} æ¼”å”±ã€‚`;
            handleCorrectAnswer(true); // è¦–ç‚ºå·²å®Œæˆç•¶å‰æ­Œæ›²ï¼Œä¸¦æ¨™è¨˜ç‚ºçœ‹ç­”æ¡ˆ
        }
        
        /**
         * è™•ç†ç­”å°æˆ–çœ‹ç­”æ¡ˆå¾Œçš„å¾ŒçºŒæ“ä½œã€‚
         * @param {boolean} isSkipped - æ˜¯å¦ç‚ºè·³é (çœ‹ç­”æ¡ˆ)
         */
        function handleCorrectAnswer(isSkipped = false) {
            isAnswered = true; // æ¨™è¨˜ç•¶å‰æ­Œæ›²å·²è™•ç†
            guessInput.disabled = true; // ç¦ç”¨è¼¸å…¥æ¡†
            audioPlayer.pause(); // æš«åœéŸ³æ¨‚
            
            // éš±è—æäº¤å’Œçœ‹ç­”æ¡ˆæŒ‰éˆ•
            submitBtn.style.display = 'none';
            showAnswerBtn.style.display = 'none';

            // é¡¯ç¤ºã€Œå†ä¾†ä¸€é¦–ã€æŒ‰éˆ•ï¼Œå¦‚æœé‚„æœ‰æ­Œæ›²
            if (availableSongs.length > 0) {
                nextSongBtn.style.display = 'inline-block';
            } else {
                // å¦‚æœæ²’æœ‰æ›´å¤šæ­Œæ›²ï¼Œç›´æ¥é€²å…¥éŠæˆ²çµæŸ
                gameOver();
            }
        }

        /**
         * è™•ç†éŠæˆ²çµæŸçš„ç‹€æ…‹ã€‚
         */
        function gameOver() {
            feedbackArea.innerHTML = 'ğŸ‰ **æ‰€æœ‰æ­Œæ›²éƒ½çŒœå®Œäº†ï¼** æ„Ÿè¬æ‚¨çš„åƒèˆ‡ï¼';
            
            // éš±è—æ‰€æœ‰éŠæˆ²æ§åˆ¶æŒ‰éˆ•
            submitBtn.style.display = 'none';
            showAnswerBtn.style.display = 'none';
            nextSongBtn.style.display = 'none';
            
            // é¡¯ç¤ºé‡æ–°é–‹å§‹æŒ‰éˆ•
            restartBtn.style.display = 'inline-block';
            
            // åœç”¨éŸ³æ¨‚æ’­æ”¾å™¨æ§åˆ¶ (å¯é¸)
            audioPlayer.pause();
            audioPlayer.removeAttribute('controls'); 
        }

        // --- äº‹ä»¶ç›£è½å™¨ ---

        // ç¶å®šã€Œé€å‡ºç­”æ¡ˆã€æŒ‰éˆ•
        submitBtn.addEventListener('click', submitGuess);

        // ç¶å®šã€Œçœ‹ç­”æ¡ˆã€æŒ‰éˆ•
        showAnswerBtn.addEventListener('click', showAnswer);

        // ç¶å®šã€Œå†ä¾†ä¸€é¦–ã€æŒ‰éˆ•
        nextSongBtn.addEventListener('click', loadNextSong);

        // ç¶å®šã€Œé‡æ–°é–‹å§‹éŠæˆ²ã€æŒ‰éˆ•
        restartBtn.addEventListener('click', () => {
             // é‡æ–°å•Ÿç”¨éŸ³æ¨‚æ’­æ”¾å™¨æ§åˆ¶ (å¦‚æœä¹‹å‰ç§»é™¤)
            audioPlayer.setAttribute('controls', ''); 
            initializeGame();
        });

        // å…è¨±ä½¿ç”¨è€…åœ¨è¼¸å…¥æ¡†æŒ‰ Enter éµé€å‡ºç­”æ¡ˆ
        guessInput.addEventListener('keypress', function(e) {
            // éµç›¤ç¢¼ 13 æ˜¯ Enter éµ
            if (e.key === 'Enter' && !guessInput.disabled) {
                submitGuess();
            }
        });

        // --- éŠæˆ²å•Ÿå‹• ---
        // é é¢è¼‰å…¥å®Œæˆå¾Œï¼Œåˆå§‹åŒ–éŠæˆ²
        document.addEventListener('DOMContentLoaded', initializeGame);

    </script>
</body>
</html>